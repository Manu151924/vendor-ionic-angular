<div class="inventory-box">
  <ion-card class="inventory-card">
    <div class="card-header">
      <ion-chip class="custom-dropdown">
        <ion-icon name="location" class="location"></ion-icon>
        DELHI-11
      </ion-chip>
      <div class="header-right">
        <p class="header-label">
          Assigned SFX 
          <span class="header-value" (click)="openSfxModal()">20</span>
        </p>
      </div>
    </div>
    <div class="card-content">
    <div class="status-list">
      <div class="status-row zero" (click)="openZeroPickupModal()">
        <div class="bar-rail">
          <div class="bar-fill label-fill" style="width: 18%;">
            <span class="status-label">ZERO PICKUP SFX</span>
          </div>
        </div>
        <span class="status-value">4</span>
      </div>
      <div class="status-row not" (click)="openNotManifestedModal()">
        <div class="bar-rail">
          <div class="bar-fill label-fill" style="width: 60%;">
            <span class="status-label">NOT-MANIFESTED</span>
          </div>
        </div>
        <span class="status-value">120</span>
      </div>
      <div class="status-row draft" (click)="openDraftWaybillsModal()">
        <div class="bar-rail">
          <div class="bar-fill label-fill" style="width: 40%;">
            <span class="status-label">DRAFT WAYBILLS</span>
          </div>
        </div>
        <span class="status-value">79</span>
      </div>
    </div>
    </div>
  </ion-card>
</div>
  <app-trip-report></app-trip-report>
<ion-grid class="summary-grid">
  <ion-row>
    <ion-col size="6">
      <ion-card class="summary-card">
        <div class="card-row">
          <div class="card-icon-wrap">
            <ion-icon name="swap-horizontal-outline"></ion-icon>
          </div>
          <div class="card-info">
            <div class="card-main red">3</div>
            <div class="card-label">Interchange Waybill's</div>
          </div>
        </div>
      </ion-card>
    </ion-col>
    <ion-col size="6">
      <ion-card class="summary-card">
        <div class="card-row">
          <div class="card-icon-wrap">
            <ion-icon name="bus-outline"></ion-icon>
          </div>
          <div class="card-info">
            <div class="card-main red">3</div>
            <div class="card-label">Market Veh. Req.</div>
          </div>
        </div>
      </ion-card>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size="6">
      <ion-card class="summary-card">
        <div class="card-row">

          <div class="card-info">
            <div class="card-main red">â‚¹ 23,50,000.<span class="decimal">00</span></div>
            <div class="card-label">Paid Outstanding</div>
          </div>
        </div>
      </ion-card>
    </ion-col>
    <ion-col size="6">
      <ion-card class="summary-card">
        <div class="card-row">
          <div class="card-icon-wrap green">
            <ion-icon name="lock-closed-outline"></ion-icon>
          </div>
          <div class="card-info">
            <div class="card-main green">62<span class="percent">%</span></div>
            <div class="card-label">Weight Volume</div>
          </div>
        </div>
      </ion-card>
    </ion-col>
  </ion-row>
</ion-grid>

<ion-card class="snapshot-card">
  <div class="snapshot-header">
    <span class="snapshot-title">Month Wise Snapshot</span>
    <ion-select   class="snapshot-dropdown" fill="solid" color="success" size="small"[(ngModel)]="selectedMonth" interface="popover" (ionChange)="loadDataForMonth(selectedMonth)">
      @for(month of validMonths; track month ){
              <ion-select-option  [value]="month">{{ month }}</ion-select-option>
      }
    </ion-select>
  </div>
  <div class="snapshot-content">
    <div class="donut-section">
      <ngx-charts-pie-chart
        [results]="pieChartData"
        [scheme]="colorSchemeForPie"
        [doughnut]="true"
        [labels]="false"
        [legend]="false"
        [view]="[110,110]">
      </ngx-charts-pie-chart>
      <div class="donut-center-text">
        <div class="donut-value">{{ totalWaybill }}</div>
        <div class="donut-label">BOOKED</div>
      </div>
      <div class="donut-legend2">
        <div>
          <span class="donut-stat-label">Edited Waybill</span>
          <span class="donut-stat-value">WB: {{ editedWaybill }}</span>
        </div>
        <div>
          <span class="donut-stat-label">Un-Edited Waybill</span>
          <span class="donut-stat-value">WB: {{ totalWaybill - editedWaybill }}</span>
        </div>
      </div>
    </div>
    <div class="snapshot-bars2">
      <div class="bar-section">
        <div class="bar-label-row">
          <span>Weight Volume</span>
          <span class="bar-percentage"
            [ngStyle]="{ color: getColorForWeightVolume(getWeightVolumePercent()) }">
            {{ getWeightVolumePercent() }}%
          </span>
        </div>
        <div class="bar-bg2">
          <div class="bar-fill2"
            [ngStyle]="{ width: getWeightVolumePercent() + '%', background: getGradientForWeightVolume(getWeightVolumePercent()) }"></div>
        </div>
      </div>
      <div class="bar-section">
        <div class="bar-label-row">
          <span>Interchange Waybills</span>
          <span class="bar-percentage"
            [ngStyle]="{ color: getColorForInterchange(getInterchangePercent()) }">
            {{ getInterchangePercent() }}%
          </span>
        </div>
        <div class="bar-bg2">
          <div class="bar-fill2"
            [ngStyle]="{ width: getInterchangePercent() + '%', background: getGradientForInterchange(getInterchangePercent()) }"></div>
        </div>
      </div>
      <div class="bar-section">
        <div class="bar-label-row">
          <span>Market Vehicle Usage</span>
          <span class="bar-percentage"
            [ngStyle]="{ color: getColorForMarketVehicleUsage(getMarketVehicleUsagePercent()) }">
            {{ getMarketVehicleUsagePercent() }}%
          </span>
        </div>
        <div class="bar-bg2">
          <div class="bar-fill2"
            [ngStyle]="{ width: getMarketVehicleUsagePercent() + '%', background: getGradientForMarketVehicleUsage(getMarketVehicleUsagePercent()) }"></div>
        </div>
      </div>
    </div>
  </div>
</ion-card>
